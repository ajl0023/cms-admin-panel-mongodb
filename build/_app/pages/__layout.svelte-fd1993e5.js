import{S as j,i as q,s as A,l as k,g as p,o as u,p as v,q as _,d as m,F as y,n as h,e as I,c as M,a as N,b as B,w as d,x as $,y as b,G as w,B as g,H as C,k as D,m as E,I as F,J as G,K as H}from"../chunks/vendor-f58ccb3c.js";import{c as S}from"../chunks/category-store-95d00765.js";import J from"../chunks/StartModal-09a99527.js";import K from"../chunks/Navbar-831d0e3a.js";import{s as O,A as V}from"../chunks/AuthModal-167a3e92.js";import"../chunks/navigation-0e6511d1.js";import"../chunks/singletons-d1fb5791.js";function z(c){let t,r,e,a;const s=[Q,P],o=[];function n(l,i){return l[1].collection?1:0}return r=n(c),e=o[r]=s[r](c),{c(){t=I("div"),e.c(),this.h()},l(l){t=M(l,"DIV",{class:!0});var i=N(t);e.l(i),i.forEach(m),this.h()},h(){B(t,"class","wrapper svelte-hkifws")},m(l,i){p(l,t,i),o[r].m(t,null),a=!0},p(l,i){let f=r;r=n(l),r===f?o[r].p(l,i):(h(),u(o[f],1,1,()=>{o[f]=null}),v(),e=o[r],e?e.p(l,i):(e=o[r]=s[r](l),e.c()),_(e,1),e.m(t,null))},i(l){a||(_(e),a=!0)},o(l){u(e),a=!1},d(l){l&&m(t),o[r].d()}}}function L(c){let t,r;return t=new V({}),{c(){d(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,a){b(t,e,a),r=!0},p:w,i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){u(t.$$.fragment,e),r=!1},d(e){g(t,e)}}}function P(c){let t,r,e;t=new K({});const a=c[3].default,s=C(a,c,c[2],null);return{c(){d(t.$$.fragment),r=D(),s&&s.c()},l(o){$(t.$$.fragment,o),r=E(o),s&&s.l(o)},m(o,n){b(t,o,n),p(o,r,n),s&&s.m(o,n),e=!0},p(o,n){s&&s.p&&(!e||n&4)&&F(s,a,o,o[2],e?H(a,o[2],n,null):G(o[2]),null)},i(o){e||(_(t.$$.fragment,o),_(s,o),e=!0)},o(o){u(t.$$.fragment,o),u(s,o),e=!1},d(o){g(t,o),o&&m(r),s&&s.d(o)}}}function Q(c){let t,r;return t=new J({}),{c(){d(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,a){b(t,e,a),r=!0},p:w,i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){u(t.$$.fragment,e),r=!1},d(e){g(t,e)}}}function R(c){let t,r,e,a;const s=[L,z],o=[];function n(l,i){return l[0].user.status!=="logged_in"?0:1}return t=n(c),r=o[t]=s[t](c),{c(){r.c(),e=k()},l(l){r.l(l),e=k()},m(l,i){o[t].m(l,i),p(l,e,i),a=!0},p(l,[i]){let f=t;t=n(l),t===f?o[t].p(l,i):(h(),u(o[f],1,1,()=>{o[f]=null}),v(),r=o[t],r?r.p(l,i):(r=o[t]=s[t](l),r.c()),_(r,1),r.m(e.parentNode,e))},i(l){a||(_(r),a=!0)},o(l){u(r),a=!1},d(l){o[t].d(l),l&&m(e)}}}const te=!1;async function re({fetch:c,stuff:t,session:r}){if(r.user.status==="logged_in"){const e=await c("/api/collection");try{if(e.status===403)return{props:{collection:null}};const s=(await(await c("/api/categories")).json()).categories.reduce((n,l)=>(n[l._id]=l,n),{}),o=await e.json();return S.update(n=>(n.collection=o.collection,n.categories=s,n)),{}}catch{}}return{}}function T(c,t,r){let e,a;y(c,O,n=>r(0,e=n)),y(c,S,n=>r(1,a=n));let{$$slots:s={},$$scope:o}=t;return c.$$set=n=>{"$$scope"in n&&r(2,o=n.$$scope)},[e,a,o,s]}class oe extends j{constructor(t){super();q(this,t,T,R,A,{})}}export{oe as default,re as load,te as prerender};
