var ft=Object.defineProperty;var ye=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var Ee=(i,e,n)=>e in i?ft(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,ie=(i,e)=>{for(var n in e||(e={}))ut.call(e,n)&&Ee(i,n,e[n]);if(ye)for(var n of ye(e))dt.call(e,n)&&Ee(i,n,e[n]);return i};import{D as ve,N as ht,O as ee,S as te,i as le,s as ne,l as Q,g as T,e as v,t as M,k as A,c as b,a as $,h as q,m as B,d as g,b as m,F as _,G as X,j as ae,I as W,H as re,P as x,Q as de,R as _e,v as ce,T as we,q as k,w as Y,x as J,y as z,o as I,B as G,n as H,p as O,_ as me,E as gt,U as Ie,V as De,W as be,X as $e}from"../../chunks/vendor-0a020ef4.js";import{h as K}from"../../chunks/host-c1de9bea.js";const _t=()=>{const i={currentTable:null,tables:{},columns:[],categories:[],cursor:null,modalVisible:!0},{subscribe:e,set:n,update:t}=ve(i);return ie({subscribe:e,set:n,update:t},{handleModal(){t(o=>(o.modalVisible=!0,o))},setCurrentTable(o){t(a=>(a.currentTable=o,a))},async fetchData(o,a){const s=i.currentTable,r=await fetch(`http://localhost:3000/api/category?category=${s.orig}${o?`&next=${o}`:""}`),c=i.columns.length>0?i.columns:await fetch(`http://localhost:3000/api/columns?category=${s.orig}`),u=i.columns.length>0?i.columns:await c.json();i.columns.length>0&&t(p=>(p.columns=u,p));let f=await r.json();const d=f.page;t(p=>(p.cursor=d,p));const h=[];return f=f.results.map(p=>{const P={},w=[];for(const E of u)w.push({column:E,value:p[E.db_name]});return P.table_cols=w,P.data={uid:p.uid},h.push(P),w}),{rows:h,columns:u,cursor:d}}})},fe=_t(),mt={replace_media:{name:"replace_media",inputs:[{type:"media"}]}},pt=()=>{const i={visible:!1,content:null,inputs:{},files:{},isInserting:!1,action:null,selected:null},{subscribe:e,set:n,update:t}=ve(i);return ie({subscribe:e,set:n,update:t},{handleVisible(o,a){t(s=>(s.content=o,s.visible=!0,s.action=mt[a],s))}})},se=pt(),vt=()=>{const i={deleted:[]},e=ie({},i),{subscribe:n,set:t,update:l}=ve(i);return ie({subscribe:n,set:t,update:l},{init(){l(()=>e)},async handleDelete(a){let s;l(u=>(s=u.deleted.reduce((f,d)=>(a==="mobile"?f[d.page._id]?f[d.page._id].push({_id:d.image_id,category:d.page.category}):f[d.page._id]=[{_id:d.image_id,category:d.page.category}]:a!=="carousel-renders"?f[d.page._id]?f[d.page._id].push(d.image_id):f[d.page._id]=[d.image_id]:f[d.page._id]?f[d.page._id].push({_id:d.image_id,col:d.col}):f[d.page._id]=[{_id:d.image_id,col:d.col}],f),{}),u.deleted=[],u));const r=ht(fe);if(r.currentTable.category==="mobile"){const u={};for(const f in s){const d=s[f];u[f]=d,r.categories[d[0].category].category==="behind-the-scenes"?await ee(`${K}/api/${a}/behind-the-scenes`,{method:"DELETE",data:{deleted:u,category:a}}):await ee(`${K}/api/${a}`,{method:"DELETE",data:{deleted:u,category:a}})}return}await ee(`${K}/api/${a}`,{method:"DELETE",data:{deleted:s,category:a}})},addItem(a){l(s=>{const r=s.deleted.findIndex(c=>a.image_id===c.image_id);return s.deleted.length===0||r<0?(s.deleted=[...s.deleted,a],console.log(s.deleted),s):(s.deleted=s.deleted.filter(c=>c.image_id!==a.image_id),console.log(s.deleted),s)})}})},he=vt();function Ve(i,e,n){const t=i.slice();return t[5]=e[n],t}function Te(i){let e,n=i[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=Pe(Ve(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=Q()},l(l){for(let o=0;o<t.length;o+=1)t[o].l(l);e=Q()},m(l,o){for(let a=0;a<t.length;a+=1)t[a].m(l,o);T(l,e,o)},p(l,o){if(o&15){n=l[0];let a;for(a=0;a<n.length;a+=1){const s=Ve(l,n,a);t[a]?t[a].p(s,o):(t[a]=Pe(s),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(l){W(t,l),l&&g(e)}}}function Pe(i){let e,n=i[5]+"",t,l,o,a;function s(){return i[4](i[5])}return{c(){e=v("button"),t=M(n),l=A(),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var c=$(e);t=q(c,n),l=B(c),c.forEach(g),this.h()},h(){m(e,"class","btn btn-primary")},m(r,c){T(r,e,c),_(e,t),_(e,l),o||(a=X(e,"click",s),o=!0)},p(r,c){i=r,c&1&&n!==(n=i[5]+"")&&ae(t,n)},d(r){r&&g(e),o=!1,a()}}}function bt(i){let e,n=i[0]&&Te(i);return{c(){e=v("div"),n&&n.c(),this.h()},l(t){e=b(t,"DIV",{class:!0});var l=$(e);n&&n.l(l),l.forEach(g),this.h()},h(){m(e,"class","wrapper")},m(t,l){T(t,e,l),n&&n.m(e,null)},p(t,[l]){t[0]?n?n.p(t,l):(n=Te(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:re,o:re,d(t){t&&g(e),n&&n.d()}}}function $t(i,e,n){let t;x(i,se,r=>n(3,t=r));let{options:l}=e,{data:o}=e,{isInserting:a}=e;const s=r=>{de(se,t.visible=!0,t),de(se,t.isInserting=a,t),de(se,t.content=o,t),de(se,t.action=r.action,t)};return i.$$set=r=>{"options"in r&&n(0,l=r.options),"data"in r&&n(1,o=r.data),"isInserting"in r&&n(2,a=r.isInserting)},[l,o,a,t,s]}class oe extends te{constructor(e){super();le(this,e,$t,bt,ne,{options:0,data:1,isInserting:2})}}function kt(i){let e,n,t,l,o;return{c(){e=v("div"),n=v("label"),t=M("Add Image Here"),this.h()},l(a){e=b(a,"DIV",{class:!0});var s=$(e);n=b(s,"LABEL",{for:!0,class:!0});var r=$(n);t=q(r,"Add Image Here"),r.forEach(g),s.forEach(g),this.h()},h(){m(n,"for","image"),m(n,"class","svelte-5f9rtq"),m(e,"class","replace-container svelte-5f9rtq")},m(a,s){T(a,e,s),_(e,n),_(n,t),l||(o=X(e,"click",i[8]),l=!0)},p:re,d(a){a&&g(e),l=!1,o()}}}function yt(i){let e,n;return{c(){e=v("img"),this.h()},l(t){e=b(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){we(e.src,n=i[0].url)||m(e,"src",n),m(e,"alt",""),m(e,"class","svelte-5f9rtq")},m(t,l){T(t,e,l)},p(t,l){l&1&&!we(e.src,n=t[0].url)&&m(e,"src",n)},d(t){t&&g(e)}}}function Et(i){let e,n,t,l,o,a;function s(u,f){if(u[0].url)return yt;if(u[3].currentTable.category==="carousel-renders")return kt}let r=s(i),c=r&&r(i);return{c(){e=v("div"),n=v("div"),t=A(),c&&c.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=$(e);n=b(f,"DIV",{class:!0}),$(n).forEach(g),t=B(f),c&&c.l(f),f.forEach(g),this.h()},h(){m(n,"class","selected-container svelte-5f9rtq"),_e(n,"selected",i[4].deleted.find(i[7])),m(e,"class",l="image-container "+(i[2]?i[2]:"")+" svelte-5f9rtq"),_e(e,"hidden",!i[0].url&&i[3].currentTable.category!=="carousel-renders")},m(u,f){T(u,e,f),_(e,n),_(e,t),c&&c.m(e,null),o||(a=X(e,"click",i[9]),o=!0)},p(u,[f]){f&17&&_e(n,"selected",u[4].deleted.find(u[7])),r===(r=s(u))&&c?c.p(u,f):(c&&c.d(1),c=r&&r(u),c&&(c.c(),c.m(e,null))),f&4&&l!==(l="image-container "+(u[2]?u[2]:"")+" svelte-5f9rtq")&&m(e,"class",l),f&13&&_e(e,"hidden",!u[0].url&&u[3].currentTable.category!=="carousel-renders")},i:re,o:re,d(u){u&&g(e),c&&c.d(),o=!1,a()}}}function wt(i,e,n){let t,l,o;x(i,fe,h=>n(3,t=h)),x(i,he,h=>n(4,l=h)),x(i,se,h=>n(5,o=h));let{pages:a}=e;ce(async()=>{});let{img:s}=e,{page:r}=e,{col:c}=e;const u=h=>h.image_id===s._id,f=()=>{se.handleVisible(r,"replace_media"),de(se,o.selected=ie({col:c},s),o)},d=()=>{if(s.url){he.addItem(t.currentTable.category==="bg-pages"?{image_id:s._id,page:r}:{image_id:s._id,page:r,col:c});return}};return i.$$set=h=>{"pages"in h&&n(6,a=h.pages),"img"in h&&n(0,s=h.img),"page"in h&&n(1,r=h.page),"col"in h&&n(2,c=h.col)},[s,r,c,t,l,o,a,u,f,d]}class ge extends te{constructor(e){super();le(this,e,wt,Et,ne,{pages:6,img:0,page:1,col:2})}}function Ne(i,e,n){const t=i.slice();return t[1]=e[n],t}function Se(i,e,n){const t=i.slice();return t[4]=e[n],t}function Ae(i){let e,n,t=i[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=Me(Ne(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Q()},l(a){for(let s=0;s<l.length;s+=1)l[s].l(a);e=Q()},m(a,s){for(let r=0;r<l.length;r+=1)l[r].m(a,s);T(a,e,s),n=!0},p(a,s){if(s&1){t=a[0];let r;for(r=0;r<t.length;r+=1){const c=Ne(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=Me(c),l[r].c(),k(l[r],1),l[r].m(e.parentNode,e))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){W(l,a),a&&g(e)}}}function Be(i){let e,n;return e=new ge({props:{img:i[4],page:i[1],col:"images"}}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.img=t[4]),l&1&&(o.page=t[1]),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Me(i){let e,n,t,l=i[1].page+"",o,a,s,r,c,u,f,d;r=new oe({props:{data:i[1],options:["Add Photos"]}});let h=i[1].images,p=[];for(let w=0;w<h.length;w+=1)p[w]=Be(Se(i,h,w));const P=w=>I(p[w],1,1,()=>{p[w]=null});return{c(){e=v("div"),n=v("div"),t=v("span"),o=M(l),a=A(),s=v("div"),Y(r.$$.fragment),c=A(),u=v("div");for(let w=0;w<p.length;w+=1)p[w].c();f=A(),this.h()},l(w){e=b(w,"DIV",{class:!0});var E=$(e);n=b(E,"DIV",{class:!0});var j=$(n);t=b(j,"SPAN",{});var V=$(t);o=q(V,l),V.forEach(g),a=B(j),s=b(j,"DIV",{class:!0});var U=$(s);J(r.$$.fragment,U),U.forEach(g),j.forEach(g),c=B(E),u=b(E,"DIV",{class:!0});var y=$(u);for(let C=0;C<p.length;C+=1)p[C].l(y);y.forEach(g),f=B(E),E.forEach(g),this.h()},h(){m(s,"class","edit-bar"),m(n,"class","top-bar"),m(u,"class","images-container"),m(e,"class","phase-container")},m(w,E){T(w,e,E),_(e,n),_(n,t),_(t,o),_(n,a),_(n,s),z(r,s,null),_(e,c),_(e,u);for(let j=0;j<p.length;j+=1)p[j].m(u,null);_(e,f),d=!0},p(w,E){(!d||E&1)&&l!==(l=w[1].page+"")&&ae(o,l);const j={};if(E&1&&(j.data=w[1]),r.$set(j),E&1){h=w[1].images;let V;for(V=0;V<h.length;V+=1){const U=Se(w,h,V);p[V]?(p[V].p(U,E),k(p[V],1)):(p[V]=Be(U),p[V].c(),k(p[V],1),p[V].m(u,null))}for(H(),V=h.length;V<p.length;V+=1)P(V);O()}},i(w){if(!d){k(r.$$.fragment,w);for(let E=0;E<h.length;E+=1)k(p[E]);d=!0}},o(w){I(r.$$.fragment,w),p=p.filter(Boolean);for(let E=0;E<p.length;E+=1)I(p[E]);d=!1},d(w){w&&g(e),G(r),W(p,w)}}}function It(i){let e,n,t,l,o,a,s=i[0].length>0&&Ae(i);return{c(){e=v("div"),n=v("div"),s&&s.c(),t=A(),l=v("style"),o=M(`.wrapper {
  overflow-y: auto;
}

.phase-container {
  margin-top: 30px;
}

.top-bar {
  display: flex;
  align-items: flex-end;
  margin-bottom: 10px;
}
.top-bar .edit-bar {
  margin-left: 30px;
}

.images-container {
  display: flex;
  flex-wrap: wrap;
}
.images-container .image-container {
  width: 100px;
  padding: 2px;
  height: 100px;
}
.images-container .image-container img {
  object-fit: cover;
  width: 100%;
  height: 100%;
}`),this.h()},l(r){e=b(r,"DIV",{class:!0});var c=$(e);n=b(c,"DIV",{class:!0});var u=$(n);s&&s.l(u),u.forEach(g),t=B(c),l=b(c,"STYLE",{lang:!0});var f=$(l);o=q(f,`.wrapper {
  overflow-y: auto;
}

.phase-container {
  margin-top: 30px;
}

.top-bar {
  display: flex;
  align-items: flex-end;
  margin-bottom: 10px;
}
.top-bar .edit-bar {
  margin-left: 30px;
}

.images-container {
  display: flex;
  flex-wrap: wrap;
}
.images-container .image-container {
  width: 100px;
  padding: 2px;
  height: 100px;
}
.images-container .image-container img {
  object-fit: cover;
  width: 100%;
  height: 100%;
}`),f.forEach(g),c.forEach(g),this.h()},h(){m(n,"class","wrapper"),m(l,"lang","scss"),m(e,"class","wrapper")},m(r,c){T(r,e,c),_(e,n),s&&s.m(n,null),_(e,t),_(e,l),_(l,o),a=!0},p(r,[c]){r[0].length>0?s?(s.p(r,c),c&1&&k(s,1)):(s=Ae(r),s.c(),k(s,1),s.m(n,null)):s&&(H(),I(s,1,1,()=>{s=null}),O())},i(r){a||(k(s),a=!0)},o(r){I(s),a=!1},d(r){r&&g(e),s&&s.d()}}}function Dt(i,e,n){let{pages:t}=e;return i.$$set=l=>{"pages"in l&&n(0,t=l.pages)},[t]}class Vt extends te{constructor(e){super();le(this,e,Dt,It,ne,{pages:0})}}function qe(i,e,n){const t=i.slice();return t[4]=e[n],t}function Ce(i,e,n){const t=i.slice();return t[10]=e[n],t}function Le(i,e,n){const t=i.slice();return t[7]=e[n],t}function je(i,e,n){const t=i.slice();return t[7]=e[n],t}function Fe(i){let e,n;return e=new oe({props:{data:i[4],options:["Add Photos"]}}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.data=t[4]),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Tt(i){let e,n,t,l;n=new oe({props:{isInserting:!0,data:i[4],options:["Add Phase"]}});let o=i[4].phases,a=[];for(let r=0;r<o.length;r+=1)a[r]=Oe(Ce(i,o,r));const s=r=>I(a[r],1,1,()=>{a[r]=null});return{c(){e=v("div"),Y(n.$$.fragment),t=A();for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var c=$(e);J(n.$$.fragment,c),t=B(c);for(let u=0;u<a.length;u+=1)a[u].l(c);c.forEach(g),this.h()},h(){m(e,"class","bts-mobile-container")},m(r,c){T(r,e,c),z(n,e,null),_(e,t);for(let u=0;u<a.length;u+=1)a[u].m(e,null);l=!0},p(r,c){const u={};if(c&1&&(u.data=r[4]),n.$set(u),c&3){o=r[4].phases;let f;for(f=0;f<o.length;f+=1){const d=Ce(r,o,f);a[f]?(a[f].p(d,c),k(a[f],1)):(a[f]=Oe(d),a[f].c(),k(a[f],1),a[f].m(e,null))}for(H(),f=o.length;f<a.length;f+=1)s(f);O()}},i(r){if(!l){k(n.$$.fragment,r);for(let c=0;c<o.length;c+=1)k(a[c]);l=!0}},o(r){I(n.$$.fragment,r),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)I(a[c]);l=!1},d(r){r&&g(e),G(n),W(a,r)}}}function Pt(i){let e,n,t=i[4].images,l=[];for(let a=0;a<t.length;a+=1)l[a]=Re(je(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Q()},l(a){for(let s=0;s<l.length;s+=1)l[s].l(a);e=Q()},m(a,s){for(let r=0;r<l.length;r+=1)l[r].m(a,s);T(a,e,s),n=!0},p(a,s){if(s&1){t=a[4].images;let r;for(r=0;r<t.length;r+=1){const c=je(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=Re(c),l[r].c(),k(l[r],1),l[r].m(e.parentNode,e))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){W(l,a),a&&g(e)}}}function Ue(i){let e,n,t,l,o,a,s,r,c;function u(){return i[3](i[4],i[10])}return{c(){e=v("span"),n=M(`Confirm Deletion\r
											`),t=v("span"),l=M("Yes"),o=M(`/\r
											`),a=v("span"),s=M("No"),this.h()},l(f){e=b(f,"SPAN",{});var d=$(e);n=q(d,`Confirm Deletion\r
											`),t=b(d,"SPAN",{class:!0});var h=$(t);l=q(h,"Yes"),h.forEach(g),o=q(d,`/\r
											`),a=b(d,"SPAN",{class:!0});var p=$(a);s=q(p,"No"),p.forEach(g),d.forEach(g),this.h()},h(){m(t,"class","confirm-button confirm svelte-65qigw"),m(a,"class","confirm-button cancel svelte-65qigw")},m(f,d){T(f,e,d),_(e,n),_(e,t),_(t,l),_(e,o),_(e,a),_(a,s),r||(c=X(t,"click",u),r=!0)},p(f,d){i=f},d(f){f&&g(e),r=!1,c()}}}function He(i){let e,n;return e=new ge({props:{img:i[7],page:i[4]}}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.img=t[7]),l&1&&(o.page=t[4]),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Oe(i){let e,n,t,l,o=i[10].phase+"",a,s,r,c,u,f,d,h,p,P,w,E;c=new oe({props:{data:ie(ie({},i[4]),i[10]),options:["Add Photos"]}});function j(){return i[2](i[10])}let V=i[1]===i[10].phase&&Ue(i),U=i[10].images,y=[];for(let D=0;D<U.length;D+=1)y[D]=He(Le(i,U,D));const C=D=>I(y[D],1,1,()=>{y[D]=null});return{c(){e=v("div"),n=v("div"),t=v("span"),l=M("Phase "),a=M(o),s=A(),r=v("div"),Y(c.$$.fragment),u=v("button"),f=M("Delete Phase"),V&&V.c(),d=A(),h=v("div");for(let D=0;D<y.length;D+=1)y[D].c();p=A(),this.h()},l(D){e=b(D,"DIV",{class:!0});var L=$(e);n=b(L,"DIV",{class:!0});var S=$(n);t=b(S,"SPAN",{});var N=$(t);l=q(N,"Phase "),a=q(N,o),N.forEach(g),s=B(S),r=b(S,"DIV",{class:!0});var R=$(r);J(c.$$.fragment,R),u=b(R,"BUTTON",{class:!0});var F=$(u);f=q(F,"Delete Phase"),F.forEach(g),V&&V.l(R),R.forEach(g),S.forEach(g),d=B(L),h=b(L,"DIV",{class:!0});var Z=$(h);for(let ue=0;ue<y.length;ue+=1)y[ue].l(Z);Z.forEach(g),p=B(L),L.forEach(g),this.h()},h(){m(u,"class","btn btn-danger"),m(r,"class","edit-bar svelte-65qigw"),m(n,"class","top-bar"),m(h,"class","images-container svelte-65qigw"),m(e,"class","phase-container")},m(D,L){T(D,e,L),_(e,n),_(n,t),_(t,l),_(t,a),_(n,s),_(n,r),z(c,r,null),_(r,u),_(u,f),V&&V.m(r,null),_(e,d),_(e,h);for(let S=0;S<y.length;S+=1)y[S].m(h,null);_(e,p),P=!0,w||(E=X(u,"click",j),w=!0)},p(D,L){i=D,(!P||L&1)&&o!==(o=i[10].phase+"")&&ae(a,o);const S={};if(L&1&&(S.data=ie(ie({},i[4]),i[10])),c.$set(S),i[1]===i[10].phase?V?V.p(i,L):(V=Ue(i),V.c(),V.m(r,null)):V&&(V.d(1),V=null),L&1){U=i[10].images;let N;for(N=0;N<U.length;N+=1){const R=Le(i,U,N);y[N]?(y[N].p(R,L),k(y[N],1)):(y[N]=He(R),y[N].c(),k(y[N],1),y[N].m(h,null))}for(H(),N=U.length;N<y.length;N+=1)C(N);O()}},i(D){if(!P){k(c.$$.fragment,D);for(let L=0;L<U.length;L+=1)k(y[L]);P=!0}},o(D){I(c.$$.fragment,D),y=y.filter(Boolean);for(let L=0;L<y.length;L+=1)I(y[L]);P=!1},d(D){D&&g(e),G(c),V&&V.d(),W(y,D),w=!1,E()}}}function Re(i){let e,n;return e=new ge({props:{col:"images",img:i[7],page:i[4]}}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.img=t[7]),l&1&&(o.page=t[4]),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Ye(i){let e,n,t,l,o=me.startCase(i[4].page)+"",a,s,r=i[4].type+"",c,u,f,d,h,p,P,w,E=i[4].page!=="behind-the-scenes"&&Fe(i);const j=[Pt,Tt],V=[];function U(y,C){return y[4].page!=="behind-the-scenes"?0:1}return h=U(i),p=V[h]=j[h](i),{c(){e=v("div"),n=v("div"),E&&E.c(),t=A(),l=v("span"),a=M(o),s=M(" ("),c=M(r),u=M(")"),f=A(),d=v("div"),p.c(),P=A(),this.h()},l(y){e=b(y,"DIV",{class:!0});var C=$(e);n=b(C,"DIV",{class:!0});var D=$(n);E&&E.l(D),D.forEach(g),t=B(C),l=b(C,"SPAN",{class:!0});var L=$(l);a=q(L,o),s=q(L," ("),c=q(L,r),u=q(L,")"),L.forEach(g),C.forEach(g),f=B(y),d=b(y,"DIV",{class:!0});var S=$(d);p.l(S),P=B(S),S.forEach(g),this.h()},h(){m(n,"class","edit-bar svelte-65qigw"),m(l,"class","category-name text-decoration-underline svelte-65qigw"),m(e,"class","flex-container svelte-65qigw"),m(d,"class","images-container svelte-65qigw")},m(y,C){T(y,e,C),_(e,n),E&&E.m(n,null),_(e,t),_(e,l),_(l,a),_(l,s),_(l,c),_(l,u),T(y,f,C),T(y,d,C),V[h].m(d,null),_(d,P),w=!0},p(y,C){y[4].page!=="behind-the-scenes"?E?(E.p(y,C),C&1&&k(E,1)):(E=Fe(y),E.c(),k(E,1),E.m(n,null)):E&&(H(),I(E,1,1,()=>{E=null}),O()),(!w||C&1)&&o!==(o=me.startCase(y[4].page)+"")&&ae(a,o),(!w||C&1)&&r!==(r=y[4].type+"")&&ae(c,r);let D=h;h=U(y),h===D?V[h].p(y,C):(H(),I(V[D],1,1,()=>{V[D]=null}),O(),p=V[h],p?p.p(y,C):(p=V[h]=j[h](y),p.c()),k(p,1),p.m(d,P))},i(y){w||(k(E),k(p),w=!0)},o(y){I(E),I(p),w=!1},d(y){y&&g(e),E&&E.d(),y&&g(f),y&&g(d),V[h].d()}}}function Nt(i){let e,n,t=i[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=Ye(qe(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var s=$(e);for(let r=0;r<l.length;r+=1)l[r].l(s);s.forEach(g),this.h()},h(){m(e,"class","wrapper svelte-65qigw")},m(a,s){T(a,e,s);for(let r=0;r<l.length;r+=1)l[r].m(e,null);n=!0},p(a,[s]){if(s&3){t=a[0];let r;for(r=0;r<t.length;r+=1){const c=qe(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=Ye(c),l[r].c(),k(l[r],1),l[r].m(e,null))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){a&&g(e),W(l,a)}}}function St(i,e,n){let{pages:t}=e;ce(async()=>{console.log(t)});let l;const o=s=>{n(1,l=s.phase)},a=async(s,r)=>{await ee.delete(`${K}/api/mobile/behind-the-scenes/phase`,{data:{page:s._id,phase:r.phase}})};return i.$$set=s=>{"pages"in s&&n(0,t=s.pages)},[t,l,o,a]}class At extends te{constructor(e){super();le(this,e,St,Nt,ne,{pages:0})}}function ze(i,e,n){const t=i.slice();return t[2]=e[n],t}function Ge(i){let e,n,t=me.startCase(i[2].page)+"",l,o,a,s,r,c,u;return a=new oe({props:{data:i[2],options:["Edit Photos"]}}),r=new ge({props:{img:i[2].image,col:"image",page:i[2]}}),{c(){e=v("div"),n=v("div"),l=M(t),o=A(),Y(a.$$.fragment),s=A(),Y(r.$$.fragment),c=A(),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=$(e);n=b(d,"DIV",{class:!0});var h=$(n);l=q(h,t),h.forEach(g),o=B(d),J(a.$$.fragment,d),s=B(d),J(r.$$.fragment,d),c=B(d),d.forEach(g),this.h()},h(){m(n,"class","page-title"),m(e,"class","item-container")},m(f,d){T(f,e,d),_(e,n),_(n,l),_(e,o),z(a,e,null),_(e,s),z(r,e,null),_(e,c),u=!0},p(f,d){(!u||d&1)&&t!==(t=me.startCase(f[2].page)+"")&&ae(l,t);const h={};d&1&&(h.data=f[2]),a.$set(h);const p={};d&1&&(p.img=f[2].image),d&1&&(p.page=f[2]),r.$set(p)},i(f){u||(k(a.$$.fragment,f),k(r.$$.fragment,f),u=!0)},o(f){I(a.$$.fragment,f),I(r.$$.fragment,f),u=!1},d(f){f&&g(e),G(a),G(r)}}}function Je(i){let e,n,t=i[1].currentTable.type==="bg-image"&&Ge(i);return{c(){t&&t.c(),e=Q()},l(l){t&&t.l(l),e=Q()},m(l,o){t&&t.m(l,o),T(l,e,o),n=!0},p(l,o){l[1].currentTable.type==="bg-image"?t?(t.p(l,o),o&2&&k(t,1)):(t=Ge(l),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(H(),I(t,1,1,()=>{t=null}),O())},i(l){n||(k(t),n=!0)},o(l){I(t),n=!1},d(l){t&&t.d(l),l&&g(e)}}}function Bt(i){let e,n,t=i[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=Je(ze(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Q()},l(a){for(let s=0;s<l.length;s+=1)l[s].l(a);e=Q()},m(a,s){for(let r=0;r<l.length;r+=1)l[r].m(a,s);T(a,e,s),n=!0},p(a,[s]){if(s&3){t=a[0];let r;for(r=0;r<t.length;r+=1){const c=ze(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=Je(c),l[r].c(),k(l[r],1),l[r].m(e.parentNode,e))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){W(l,a),a&&g(e)}}}function Mt(i,e,n){let t;x(i,fe,o=>n(1,t=o));let{pages:l}=e;return console.log(l),ce(async()=>{}),i.$$set=o=>{"pages"in o&&n(0,l=o.pages)},[l,t]}class qt extends te{constructor(e){super();le(this,e,Mt,Bt,ne,{pages:0})}}function Qe(i,e,n){const t=i.slice();return t[9]=e[n],t}function Ct(i){let e,n,t,l,o,a,s,r,c=i[0],u=[];for(let f=0;f<c.length;f+=1)u[f]=We(Qe(i,c,f));return{c(){e=v("div"),n=v("form");for(let f=0;f<u.length;f+=1)u[f].c();t=A(),l=v("div"),o=v("button"),a=M("Submit"),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=$(e);n=b(d,"FORM",{class:!0,id:!0,action:!0});var h=$(n);for(let w=0;w<u.length;w+=1)u[w].l(h);t=B(h),l=b(h,"DIV",{class:!0});var p=$(l);o=b(p,"BUTTON",{type:!0,class:!0});var P=$(o);a=q(P,"Submit"),P.forEach(g),p.forEach(g),h.forEach(g),d.forEach(g),this.h()},h(){m(o,"type","button"),m(o,"class","btn btn-primary mb-3"),m(l,"class","col-auto"),m(n,"class","row g-3"),m(n,"id","entry-form"),m(n,"action",""),m(e,"class","form-container svelte-1o0p388")},m(f,d){T(f,e,d),_(e,n);for(let h=0;h<u.length;h+=1)u[h].m(n,null);_(n,t),_(n,l),_(l,o),_(o,a),i[5](n),s||(r=[X(o,"click",i[3]),X(e,"click",Rt)],s=!0)},p(f,d){if(d&1){c=f[0];let h;for(h=0;h<c.length;h+=1){const p=Qe(f,c,h);u[h]?u[h].p(p,d):(u[h]=We(p),u[h].c(),u[h].m(n,t))}for(;h<u.length;h+=1)u[h].d(1);u.length=c.length}},d(f){f&&g(e),W(u,f),i[5](null),s=!1,De(r)}}}function Lt(i){let e,n,t,l,o,a,s,r,c,u,f,d,h;return{c(){e=v("div"),n=v("form"),t=v("div"),l=v("label"),o=M("image"),a=A(),s=v("input"),r=A(),c=v("div"),u=v("button"),f=M("Submit"),this.h()},l(p){e=b(p,"DIV",{class:!0});var P=$(e);n=b(P,"FORM",{class:!0,id:!0,action:!0});var w=$(n);t=b(w,"DIV",{class:!0});var E=$(t);l=b(E,"LABEL",{for:!0,class:!0});var j=$(l);o=q(j,"image"),j.forEach(g),a=B(E),s=b(E,"INPUT",{for:!0,name:!0,class:!0,type:!0,id:!0}),E.forEach(g),r=B(w),c=b(w,"DIV",{class:!0});var V=$(c);u=b(V,"BUTTON",{type:!0,class:!0});var U=$(u);f=q(U,"Submit"),U.forEach(g),V.forEach(g),w.forEach(g),P.forEach(g),this.h()},h(){m(l,"for","image"),m(l,"class","form-label"),m(s,"for","image"),m(s,"name","image"),m(s,"class","form-control"),m(s,"type","file"),m(s,"id","formFile"),m(t,"class","form-field svelte-1o0p388"),m(u,"type","button"),m(u,"class","btn btn-primary mb-3"),m(c,"class","col-auto"),m(n,"class","row g-3"),m(n,"id","entry-form"),m(n,"action",""),m(e,"class","form-container svelte-1o0p388")},m(p,P){T(p,e,P),_(e,n),_(n,t),_(t,l),_(l,o),_(t,a),_(t,s),_(n,r),_(n,c),_(c,u),_(u,f),i[4](n),d||(h=[X(u,"click",i[3]),X(e,"click",Ot)],d=!0)},p:re,d(p){p&&g(e),i[4](null),d=!1,De(h)}}}function jt(i){let e,n,t=i[9].client_label+"",l,o,a,s,r;return{c(){e=v("div"),n=v("label"),l=M(t),a=A(),s=v("input"),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=$(e);n=b(u,"LABEL",{for:!0,class:!0});var f=$(n);l=q(f,t),f.forEach(g),a=B(u),s=b(u,"INPUT",{name:!0,class:!0,placeholder:!0}),u.forEach(g),this.h()},h(){m(n,"for",o=i[9].name),m(n,"class","form-label"),m(s,"name",r=i[9].name),m(s,"class","form-control"),m(s,"placeholder",""),m(e,"class","form-field svelte-1o0p388")},m(c,u){T(c,e,u),_(e,n),_(n,l),_(e,a),_(e,s)},p(c,u){u&1&&t!==(t=c[9].client_label+"")&&ae(l,t),u&1&&o!==(o=c[9].name)&&m(n,"for",o),u&1&&r!==(r=c[9].name)&&m(s,"name",r)},d(c){c&&g(e)}}}function Ft(i){let e,n,t=i[9].client_label+"",l,o,a,s,r;return{c(){e=v("div"),n=v("label"),l=M(t),a=A(),s=v("input"),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=$(e);n=b(u,"LABEL",{for:!0,class:!0});var f=$(n);l=q(f,t),f.forEach(g),a=B(u),s=b(u,"INPUT",{name:!0,class:!0,type:!0,id:!0}),u.forEach(g),this.h()},h(){m(n,"for",o=i[9].name),m(n,"class","form-label"),m(s,"name",r=i[9].name),m(s,"class","form-control"),m(s,"type","file"),m(s,"id","formFile"),m(e,"class","form-field svelte-1o0p388")},m(c,u){T(c,e,u),_(e,n),_(n,l),_(e,a),_(e,s)},p(c,u){u&1&&t!==(t=c[9].client_label+"")&&ae(l,t),u&1&&o!==(o=c[9].name)&&m(n,"for",o),u&1&&r!==(r=c[9].name)&&m(s,"name",r)},d(c){c&&g(e)}}}function Ut(i){let e,n,t=i[9].client_label+"",l,o,a,s,r,c;return{c(){e=v("div"),n=v("label"),l=M(t),a=A(),s=v("input"),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=$(e);n=b(f,"LABEL",{for:!0,class:!0});var d=$(n);l=q(d,t),d.forEach(g),a=B(f),s=b(f,"INPUT",{class:!0,type:!0,name:!0,id:!0}),f.forEach(g),this.h()},h(){m(n,"for",o=i[9].name),m(n,"class","form-label"),m(s,"class","form-control"),m(s,"type","file"),m(s,"name",r=i[9].name),m(s,"id",c=i[9].name),s.multiple=!0,m(e,"class","form-field svelte-1o0p388")},m(u,f){T(u,e,f),_(e,n),_(n,l),_(e,a),_(e,s)},p(u,f){f&1&&t!==(t=u[9].client_label+"")&&ae(l,t),f&1&&o!==(o=u[9].name)&&m(n,"for",o),f&1&&r!==(r=u[9].name)&&m(s,"name",r),f&1&&c!==(c=u[9].name)&&m(s,"id",c)},d(u){u&&g(e)}}}function We(i){let e;function n(o,a){return o[9].type==="media"&&o[9].multi?Ut:o[9].type==="media"&&!o[9].multi?Ft:jt}let t=n(i),l=t(i);return{c(){l.c(),e=Q()},l(o){l.l(o),e=Q()},m(o,a){l.m(o,a),T(o,e,a)},p(o,a){t===(t=n(o))&&l?l.p(o,a):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){l.d(o),o&&g(e)}}}function Ht(i){let e,n,t;function l(s,r){return s[2].action&&s[2].action.name==="replace_media"?Lt:Ct}let o=l(i),a=o(i);return{c(){e=v("div"),a.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=$(e);a.l(r),r.forEach(g),this.h()},h(){m(e,"class","wrapper svelte-1o0p388")},m(s,r){T(s,e,r),a.m(e,null),n||(t=X(e,"click",i[6]),n=!0)},p(s,[r]){o===(o=l(s))&&a?a.p(s,r):(a.d(1),a=o(s),a&&(a.c(),a.m(e,null)))},i:re,o:re,d(s){s&&g(e),a.d(),n=!1,t()}}}const Ot=i=>{i.stopPropagation()},Rt=i=>{i.stopPropagation()};function Yt(i,e,n){let t,l;x(i,fe,f=>n(7,t=f)),x(i,se,f=>n(2,l=f));let o=[],a;ce(async()=>{const f=l.content;let d;console.log(l.isInserting),l.isInserting?(console.log(t.currentTable),d=t.currentTable.category==="mobile"?t.categories[f.category].insertable.fields:t.currentTable.insertable.fields):(console.log(t.categories[f.category].editableFields_mobile),d=t.currentTable.category==="mobile"?t.categories[f.category].editableFields_mobile:t.categories[f.category].editableFields),n(0,o=d),console.log(o),await gt()});const s=async()=>{if(l.action&&l.action.name==="replace_media"){const h={category:t.currentTable.category,item:l.selected,page:l.content._id,page_category:l.content.category},p=new FormData(a);p.append("data",JSON.stringify(h)),await ee.put(`${K}/api/categories/media${t.currentTable.category==="mobile"?`?mobile=${!0}`:""}`,p);return}const f=new FormData(a),d=l.content._id;if(f.append("_id",d),f.append("category",t.currentTable.category==="mobile"?l.content.category:t.currentTable._id),console.log(t.currentTable),l.content.category==="behind-the-scenes"||l.content.category==="62198a93ee6bf0f2610a1c31"){if(l.isInserting){Object.fromEntries(f.entries()),console.log(`${K}/api/${t.currentTable.category}`),t.currentTable.category!=="mobile"?await ee.post(`${K}/api/${t.currentTable.category}`,f):(console.log("hello"),await ee.post(`${K}/api/mobile/behind-the-scenes`,f));return}const h=l.content.phase;f.append("phase",h),t.currentTable.category==="mobile"?await ee.put(`${K}/api/${t.currentTable.category}/behind-the-scenes`,f):await ee.put(`${K}/api/behind-the-scenes`,f);return}await ee.put(`${K}/api/${t.currentTable.category}`,f)};function r(f){Ie[f?"unshift":"push"](()=>{a=f,n(1,a)})}function c(f){Ie[f?"unshift":"push"](()=>{a=f,n(1,a)})}return[o,a,l,s,r,c,()=>{de(se,l.visible=!1,l)}]}class zt extends te{constructor(e){super();le(this,e,Yt,Ht,ne,{})}}function Xe(i,e,n){const t=i.slice();return t[2]=e[n],t}function Ke(i,e,n){const t=i.slice();return t[5]=e[n],t}function Ze(i,e,n){const t=i.slice();return t[8]=e[n],t[10]=n,t}function xe(i){let e,n,t,l,o,a,s;return a=new ge({props:{img:i[8],page:i[2],col:i[5]}}),{c(){e=v("div"),n=v("div"),t=v("span"),l=M(i[10]),o=A(),Y(a.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var c=$(e);n=b(c,"DIV",{class:!0});var u=$(n);t=b(u,"SPAN",{class:!0});var f=$(t);l=q(f,i[10]),f.forEach(g),u.forEach(g),o=B(c),J(a.$$.fragment,c),c.forEach(g),this.h()},h(){m(t,"class","order svelte-1o8yovy"),m(n,"class","inner-order-container svelte-1o8yovy"),m(e,"class","order-container svelte-1o8yovy")},m(r,c){T(r,e,c),_(e,n),_(n,t),_(t,l),_(e,o),z(a,e,null),s=!0},p(r,c){const u={};c&1&&(u.img=r[8]),c&1&&(u.page=r[2]),a.$set(u)},i(r){s||(k(a.$$.fragment,r),s=!0)},o(r){I(a.$$.fragment,r),s=!1},d(r){r&&g(e),G(a)}}}function et(i){let e,n=i[5]+"",t,l,o,a,s,r=i[2][i[5]],c=[];for(let f=0;f<r.length;f+=1)c[f]=xe(Ze(i,r,f));const u=f=>I(c[f],1,1,()=>{c[f]=null});return{c(){e=v("span"),t=M(n),l=A(),o=v("div");for(let f=0;f<c.length;f+=1)c[f].c();a=A(),this.h()},l(f){e=b(f,"SPAN",{});var d=$(e);t=q(d,n),d.forEach(g),l=B(f),o=b(f,"DIV",{class:!0});var h=$(o);for(let p=0;p<c.length;p+=1)c[p].l(h);a=B(h),h.forEach(g),this.h()},h(){m(o,"class","images-container svelte-1o8yovy")},m(f,d){T(f,e,d),_(e,t),T(f,l,d),T(f,o,d);for(let h=0;h<c.length;h+=1)c[h].m(o,null);_(o,a),s=!0},p(f,d){if(d&3){r=f[2][f[5]];let h;for(h=0;h<r.length;h+=1){const p=Ze(f,r,h);c[h]?(c[h].p(p,d),k(c[h],1)):(c[h]=xe(p),c[h].c(),k(c[h],1),c[h].m(o,a))}for(H(),h=r.length;h<c.length;h+=1)u(h);O()}},i(f){if(!s){for(let d=0;d<r.length;d+=1)k(c[d]);s=!0}},o(f){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)I(c[d]);s=!1},d(f){f&&g(e),f&&g(l),f&&g(o),W(c,f)}}}function tt(i){let e,n,t,l,o;n=new oe({props:{data:i[2],options:["Add Photos"]}});let a=i[1],s=[];for(let c=0;c<a.length;c+=1)s[c]=et(Ke(i,a,c));const r=c=>I(s[c],1,1,()=>{s[c]=null});return{c(){e=v("div"),Y(n.$$.fragment),t=A();for(let c=0;c<s.length;c+=1)s[c].c();l=Q(),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=$(e);J(n.$$.fragment,u),u.forEach(g),t=B(c);for(let f=0;f<s.length;f+=1)s[f].l(c);l=Q(),this.h()},h(){m(e,"class","edit-bar")},m(c,u){T(c,e,u),z(n,e,null),T(c,t,u);for(let f=0;f<s.length;f+=1)s[f].m(c,u);T(c,l,u),o=!0},p(c,u){const f={};if(u&1&&(f.data=c[2]),n.$set(f),u&3){a=c[1];let d;for(d=0;d<a.length;d+=1){const h=Ke(c,a,d);s[d]?(s[d].p(h,u),k(s[d],1)):(s[d]=et(h),s[d].c(),k(s[d],1),s[d].m(l.parentNode,l))}for(H(),d=a.length;d<s.length;d+=1)r(d);O()}},i(c){if(!o){k(n.$$.fragment,c);for(let u=0;u<a.length;u+=1)k(s[u]);o=!0}},o(c){I(n.$$.fragment,c),s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)I(s[u]);o=!1},d(c){c&&g(e),G(n),c&&g(t),W(s,c),c&&g(l)}}}function Gt(i){let e,n,t=i[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=tt(Xe(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var s=$(e);for(let r=0;r<l.length;r+=1)l[r].l(s);s.forEach(g),this.h()},h(){m(e,"class","wrapper svelte-1o8yovy")},m(a,s){T(a,e,s);for(let r=0;r<l.length;r+=1)l[r].m(e,null);n=!0},p(a,[s]){if(s&3){t=a[0];let r;for(r=0;r<t.length;r+=1){const c=Xe(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=tt(c),l[r].c(),k(l[r],1),l[r].m(e,null))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){a&&g(e),W(l,a)}}}function Jt(i,e,n){let{pages:t}=e;const l=["left","right","thumbs"];return ce(async()=>{}),i.$$set=o=>{"pages"in o&&n(0,t=o.pages)},[t,l]}class Qt extends te{constructor(e){super();le(this,e,Jt,Gt,ne,{pages:0})}}function lt(i,e,n){const t=i.slice();return t[5]=e[n],t}function nt(i,e,n){const t=i.slice();return t[8]=e[n],t}function at(i){let e,n,t=i[0],l=[];for(let a=0;a<t.length;a+=1)l[a]=it(lt(i,t,a));const o=a=>I(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=Q()},l(a){for(let s=0;s<l.length;s+=1)l[s].l(a);e=Q()},m(a,s){for(let r=0;r<l.length;r+=1)l[r].m(a,s);T(a,e,s),n=!0},p(a,s){if(s&7){t=a[0];let r;for(r=0;r<t.length;r+=1){const c=lt(a,t,r);l[r]?(l[r].p(c,s),k(l[r],1)):(l[r]=it(c),l[r].c(),k(l[r],1),l[r].m(e.parentNode,e))}for(H(),r=t.length;r<l.length;r+=1)o(r);O()}},i(a){if(!n){for(let s=0;s<t.length;s+=1)k(l[s]);n=!0}},o(a){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)I(l[s]);n=!1},d(a){W(l,a),a&&g(e)}}}function rt(i){let e,n,t,l,o,a,s,r,c;function u(){return i[4](i[5])}return{c(){e=v("span"),n=M(`Confirm Deletion\r
								`),t=v("span"),l=M("Yes"),o=M(`/\r
								`),a=v("span"),s=M("No"),this.h()},l(f){e=b(f,"SPAN",{});var d=$(e);n=q(d,`Confirm Deletion\r
								`),t=b(d,"SPAN",{class:!0});var h=$(t);l=q(h,"Yes"),h.forEach(g),o=q(d,`/\r
								`),a=b(d,"SPAN",{class:!0});var p=$(a);s=q(p,"No"),p.forEach(g),d.forEach(g),this.h()},h(){m(t,"class","confirm-button confirm svelte-nw2hd8"),m(a,"class","confirm-button cancel svelte-nw2hd8")},m(f,d){T(f,e,d),_(e,n),_(e,t),_(t,l),_(e,o),_(e,a),_(a,s),r||(c=X(t,"click",u),r=!0)},p(f,d){i=f},d(f){f&&g(e),r=!1,c()}}}function st(i){let e,n;return e=new ge({props:{col:"images",img:i[8],page:i[5]}}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.img=t[8]),l&1&&(o.page=t[5]),e.$set(o)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function it(i){let e,n,t,l,o=i[5].phase+"",a,s,r,c,u,f,d,h,p,P,w,E,j,V;c=new oe({props:{data:i[5],options:["Add Photos"]}});function U(){return i[3](i[5])}let y=i[1]===i[5]._id&&rt(i),C=i[5].images,D=[];for(let S=0;S<C.length;S+=1)D[S]=st(nt(i,C,S));const L=S=>I(D[S],1,1,()=>{D[S]=null});return{c(){e=v("div"),n=v("div"),t=v("span"),l=M("Phase "),a=M(o),s=A(),r=v("div"),Y(c.$$.fragment),u=A(),f=v("button"),d=M("Delete Phase"),h=A(),y&&y.c(),p=A(),P=v("div");for(let S=0;S<D.length;S+=1)D[S].c();w=A(),this.h()},l(S){e=b(S,"DIV",{class:!0});var N=$(e);n=b(N,"DIV",{class:!0});var R=$(n);t=b(R,"SPAN",{});var F=$(t);l=q(F,"Phase "),a=q(F,o),F.forEach(g),s=B(R),r=b(R,"DIV",{class:!0});var Z=$(r);J(c.$$.fragment,Z),u=B(Z),f=b(Z,"BUTTON",{class:!0});var ue=$(f);d=q(ue,"Delete Phase"),ue.forEach(g),h=B(Z),y&&y.l(Z),Z.forEach(g),R.forEach(g),p=B(N),P=b(N,"DIV",{class:!0});var ke=$(P);for(let pe=0;pe<D.length;pe+=1)D[pe].l(ke);ke.forEach(g),w=B(N),N.forEach(g),this.h()},h(){m(f,"class","btn btn-danger"),m(r,"class","edit-bar svelte-nw2hd8"),m(n,"class","top-bar svelte-nw2hd8"),m(P,"class","images-container svelte-nw2hd8"),m(e,"class","phase-container svelte-nw2hd8")},m(S,N){T(S,e,N),_(e,n),_(n,t),_(t,l),_(t,a),_(n,s),_(n,r),z(c,r,null),_(r,u),_(r,f),_(f,d),_(r,h),y&&y.m(r,null),_(e,p),_(e,P);for(let R=0;R<D.length;R+=1)D[R].m(P,null);_(e,w),E=!0,j||(V=X(f,"click",U),j=!0)},p(S,N){i=S,(!E||N&1)&&o!==(o=i[5].phase+"")&&ae(a,o);const R={};if(N&1&&(R.data=i[5]),c.$set(R),i[1]===i[5]._id?y?y.p(i,N):(y=rt(i),y.c(),y.m(r,null)):y&&(y.d(1),y=null),N&1){C=i[5].images;let F;for(F=0;F<C.length;F+=1){const Z=nt(i,C,F);D[F]?(D[F].p(Z,N),k(D[F],1)):(D[F]=st(Z),D[F].c(),k(D[F],1),D[F].m(P,null))}for(H(),F=C.length;F<D.length;F+=1)L(F);O()}},i(S){if(!E){k(c.$$.fragment,S);for(let N=0;N<C.length;N+=1)k(D[N]);E=!0}},o(S){I(c.$$.fragment,S),D=D.filter(Boolean);for(let N=0;N<D.length;N+=1)I(D[N]);E=!1},d(S){S&&g(e),G(c),y&&y.d(),W(D,S),j=!1,V()}}}function Wt(i){let e,n,t,l;n=new oe({props:{isInserting:!0,data:i[2].currentTable,options:["Add Phase"]}});let o=i[0].length>0&&at(i);return{c(){e=v("div"),Y(n.$$.fragment),t=A(),o&&o.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var s=$(e);J(n.$$.fragment,s),t=B(s),o&&o.l(s),s.forEach(g),this.h()},h(){m(e,"class","wrapper svelte-nw2hd8")},m(a,s){T(a,e,s),z(n,e,null),_(e,t),o&&o.m(e,null),l=!0},p(a,[s]){const r={};s&4&&(r.data=a[2].currentTable),n.$set(r),a[0].length>0?o?(o.p(a,s),s&1&&k(o,1)):(o=at(a),o.c(),k(o,1),o.m(e,null)):o&&(H(),I(o,1,1,()=>{o=null}),O())},i(a){l||(k(n.$$.fragment,a),k(o),l=!0)},o(a){I(n.$$.fragment,a),I(o),l=!1},d(a){a&&g(e),G(n),o&&o.d()}}}function Xt(i,e,n){let t;x(i,fe,r=>n(2,t=r));let{pages:l=[]}=e,o;const a=r=>{n(1,o=r._id)},s=async r=>{await ee.delete(`${K}/api/${t.currentTable.category}/phase`,{data:{_id:r._id}})};return i.$$set=r=>{"pages"in r&&n(0,l=r.pages)},[l,o,t,a,s]}class Kt extends te{constructor(e){super();le(this,e,Xt,Wt,ne,{pages:0})}}function Zt(i){let e,n,t,l,o,a;return{c(){e=v("div"),n=be("svg"),t=be("path"),l=be("path"),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=$(e);n=$e(r,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var c=$(n);t=$e(c,"path",{d:!0,fill:!0});var u=$(t);u.forEach(g),l=$e(c,"path",{d:!0});var f=$(l);f.forEach(g),c.forEach(g),r.forEach(g),this.h()},h(){m(t,"d","M0 0h24v24H0z"),m(t,"fill","none"),m(l,"d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"height","24px"),m(n,"viewBox","0 0 24 24"),m(n,"width","24px"),m(n,"fill","#000000"),m(e,"class","icon svelte-10yed2m")},m(s,r){T(s,e,r),_(e,n),_(n,t),_(n,l),o||(a=X(n,"click",i[1]),o=!0)},p:re,i:re,o:re,d(s){s&&g(e),o=!1,a()}}}function xt(i,e,n){let t;return x(i,fe,o=>n(0,t=o)),[t,()=>{he.handleDelete(t.currentTable.category)}]}class el extends te{constructor(e){super();le(this,e,xt,Zt,ne,{})}}function tl(i){let e,n,t,l,o,a,s,r,c,u=i[0].deleted.length+"",f,d,h;return s=new el({}),{c(){e=v("div"),n=v("span"),t=M("Selected"),l=A(),o=v("div"),a=v("div"),Y(s.$$.fragment),r=A(),c=v("span"),f=M(u),d=M(" items"),this.h()},l(p){e=b(p,"DIV",{class:!0});var P=$(e);n=b(P,"SPAN",{});var w=$(n);t=q(w,"Selected"),w.forEach(g),l=B(P),o=b(P,"DIV",{class:!0});var E=$(o);a=b(E,"DIV",{class:!0});var j=$(a);J(s.$$.fragment,j),j.forEach(g),r=B(E),c=b(E,"SPAN",{});var V=$(c);f=q(V,u),d=q(V," items"),V.forEach(g),E.forEach(g),P.forEach(g),this.h()},h(){m(a,"class","icon-container svelte-18maog0"),m(o,"class","right-container svelte-18maog0"),m(e,"class","selected-container p-2 shadow-sm svelte-18maog0")},m(p,P){T(p,e,P),_(e,n),_(n,t),_(e,l),_(e,o),_(o,a),z(s,a,null),_(o,r),_(o,c),_(c,f),_(c,d),h=!0},p(p,[P]){(!h||P&1)&&u!==(u=p[0].deleted.length+"")&&ae(f,u)},i(p){h||(k(s.$$.fragment,p),h=!0)},o(p){I(s.$$.fragment,p),h=!1},d(p){p&&g(e),G(s)}}}function ll(i,e,n){let t;x(i,he,o=>n(0,t=o));let{pages:l}=e;return ce(async()=>{}),i.$$set=o=>{"pages"in o&&n(1,l=o.pages)},[t,l]}class nl extends te{constructor(e){super();le(this,e,ll,tl,ne,{pages:1})}}function ot(i){let e,n;return e=new zt({}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function ct(i){let e,n;return e=new nl({}),{c(){Y(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){z(e,t,l),n=!0},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function al(i){let e,n,t,l,o,a,s=i[2].visible&&ot(),r=i[3].deleted.length>0&&ct();var c=i[4][i[1]].component;function u(f){return{props:{pages:f[0]}}}return c&&(o=new c(u(i))),{c(){s&&s.c(),e=A(),n=v("div"),r&&r.c(),t=A(),l=v("div"),o&&Y(o.$$.fragment),this.h()},l(f){s&&s.l(f),e=B(f),n=b(f,"DIV",{class:!0});var d=$(n);r&&r.l(d),t=B(d),l=b(d,"DIV",{class:!0});var h=$(l);o&&J(o.$$.fragment,h),h.forEach(g),d.forEach(g),this.h()},h(){m(l,"class","content-container svelte-1bh05a3"),m(n,"class","page-wrapper svelte-1bh05a3")},m(f,d){s&&s.m(f,d),T(f,e,d),T(f,n,d),r&&r.m(n,null),_(n,t),_(n,l),o&&z(o,l,null),a=!0},p(f,[d]){f[2].visible?s?d&4&&k(s,1):(s=ot(),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(H(),I(s,1,1,()=>{s=null}),O()),f[3].deleted.length>0?r?d&8&&k(r,1):(r=ct(),r.c(),k(r,1),r.m(n,t)):r&&(H(),I(r,1,1,()=>{r=null}),O());const h={};if(d&1&&(h.pages=f[0]),c!==(c=f[4][f[1]].component)){if(o){H();const p=o;I(p.$$.fragment,1,0,()=>{G(p,1)}),O()}c?(o=new c(u(f)),Y(o.$$.fragment),k(o.$$.fragment,1),z(o,l,null)):o=null}else c&&o.$set(h)},i(f){a||(k(s),k(r),o&&k(o.$$.fragment,f),a=!0)},o(f){I(s),I(r),o&&I(o.$$.fragment,f),a=!1},d(f){s&&s.d(f),f&&g(e),f&&g(n),r&&r.d(),o&&G(o)}}}async function cl({params:i,fetch:e,session:n,stuff:t}){{console.log(323),he.init();const l=i.page;let o;fe.update(r=>(console.log(r),r.currentTable=r.categories[l],console.log(r.categories),o=r.categories[l].category,r));const a=await e(`${K}/api/${o}`),s=await a.json();return console.log(s,55),a.ok?{status:200,props:{deleted:[],currentPage:o,page:s}}:{status:404,error:new Error("Could not load")}}}function rl(i,e,n){let t,l;x(i,se,d=>n(2,t=d)),x(i,he,d=>n(3,l=d));let{page:o}=e,{columns:a}=e,{data:s}=e,{cursor:r}=e,{currentPage:c}=e,{deleted:u}=e;const f={"bg-pages":{component:qt,options:[]},"behind-the-scenes":{component:Kt,options:["Add Phase"]},"carousel-renders":{component:Qt,options:["Add photos"]},"page-carousels":{component:Vt,options:["Add photos"]},mobile:{component:At,options:["Add photos"]}};return ce(()=>{}),i.$$set=d=>{"page"in d&&n(0,o=d.page),"columns"in d&&n(5,a=d.columns),"data"in d&&n(6,s=d.data),"cursor"in d&&n(7,r=d.cursor),"currentPage"in d&&n(1,c=d.currentPage),"deleted"in d&&n(8,u=d.deleted)},[o,c,t,l,f,a,s,r,u]}class fl extends te{constructor(e){super();le(this,e,rl,al,ne,{page:0,columns:5,data:6,cursor:7,currentPage:1,deleted:8})}}export{fl as default,cl as load};
