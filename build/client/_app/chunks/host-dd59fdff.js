var y=Object.defineProperty;var p=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var g=(t,o,e)=>o in t?y(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))$.call(o,e)&&g(t,e,o[e]);if(p)for(var e of p(o))_.call(o,e)&&g(t,e,o[e]);return t};import{D as v}from"./vendor-1afa7739.js";const D=()=>{const t={currentTable:null,tables:{},columns:[],categories:[],cursor:null,modalVisible:!0},{subscribe:o,set:e,update:a}=v(t);return f({subscribe:o,set:e,update:a},{handleModal(){a(r=>(r.modalVisible=!0,r))},setCurrentTable(r){a(n=>(n.currentTable=r,n))},async fetchData(r,n){const m=t.currentTable,T=await fetch(`http://localhost:3000/api/category?category=${m.orig}${r?`&next=${r}`:""}`),j=t.columns.length>0?t.columns:await fetch(`http://localhost:3000/api/columns?category=${m.orig}`),c=t.columns.length>0?t.columns:await j.json();t.columns.length>0&&a(s=>(s.columns=c,s));let l=await T.json();const h=l.page;a(s=>(s.cursor=h,s));const b=[];return l=l.results.map(s=>{const u={},i=[];for(const d of c)i.push({column:d,value:s[d.db_name]});return u.table_cols=i,u.data={uid:s.uid},b.push(u),i}),{rows:b,columns:c,cursor:h}}})},M=D();let w;w="http://147.182.193.194";const N=w;export{N as h,M as t};
